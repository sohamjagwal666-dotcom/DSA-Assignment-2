
#include <iostream>
using namespace std;
int main() {
  int arr[4][4]={{0,10,0,12},
   {0,0,0,0},
   {0,0,5,0},
   {15,12,0,0}};
   int arr1[4][4]={{0,0,8,0},
   {0,0,0,23},
   {0,0,9,0},
   {20,25,0,0}};

   int size=0;
   int size1=0;
   for(int i=0;i<4;i++){
       for (int j=0;j<4;j++){
           if(arr[i][j]!=0){
               size++;
           }
       }
   }
   for(int i=0;i<4;i++){
       for (int j=0;j<4;j++){
           if(arr1[i][j]!=0){
               size1++;
           }
       }
   }
   
   int sp[size+1][3];
     sp[0][0]=4;
       sp[0][1]=4;
       sp[0][2]=size;
   int row=1;
   int sp1[size1+1][3];
 
     
   int row1=1;
   for(int i=0;i<4;i++){
       
       for (int j=0;j<4;j++){
           if(arr[i][j]!=0){
               sp[row][0]=i;
               sp[row][1]=j;
               sp[row][2]=arr[i][j];
               row++;
           }
       }
   }
    for(int i=0;i<4;i++){
       
       for (int j=0;j<4;j++){
           if(arr1[i][j]!=0){
               sp1[row1][0]=i;
               sp1[row1][1]=j;
               sp1[row1][2]=arr1[i][j];
               row1++;
           }
       }
   }
   cout<<"matrix 1"<<endl;
     for(int i=0;i<size+1;i++){
        cout<<sp[i][0]<<" "<<sp[i][1]<<" " <<sp[i][2]<<endl;
       }
       


       cout<<endl;
       sp1[0][0]=4;
       sp1[0][1]=4;
       sp1[0][2]=size1;
       cout<<"matrix 2 before sorting"<<endl;
        for(int i=0;i<size1+1;i++){
        cout<<sp1[i][0]<<" "<<sp1[i][1]<<" " <<sp1[i][2]<<endl;
        }
       for(int i=1;i<=size1;i++){
       int temp=sp1[i][0];
       sp1[i][0]=sp1[i][1];
       sp1[i][1]=temp;

           
           
       }
       for(int i=0;i<size1;i++){
        for(int j=1;j<=size1-1;j++){
        if  (sp1[j][0] > sp1[j+1][0] || (sp1[j][0] == sp1[j+1][0] && sp1[j][1] > sp1[j+1][1]))
{
           {
            int temp1=sp1[j][0];
            int temp2=sp1[j][1];
            int temp3=sp1[j][2];
            sp1[j][0]=sp1[j+1][0];
            sp1[j][1]=sp1[j+1][1];
            sp1[j][2]=sp1[j+1][2];
            sp1[j+1][0]=temp1;
            sp1[j+1][1]=temp2;
            sp1[j+1][2]=temp3;
            
        }}
       }}
       
       cout<<endl;
       cout<<"matrix 2 after transpose and sorting"<<endl;
        for(int i=0;i<size1+1;i++){
        cout<<sp1[i][0]<<" "<<sp1[i][1]<<" " <<sp1[i][2]<<endl;
       }
       int sp2[size+size1+1][3];
       int i=1,j=1;
       while(true){
        if(i>size){
            break;
        }
        else{
        for(int z=1;z<=size1;z++){
        if(sp[i][1]==sp1[z][1]){
            sp2[j][0]=sp[i][0];
            sp2[j][1]=sp1[z][0];
            sp2[j][2]=sp[i][2]*sp1[z][2];
            j++;
            

        }
    }}
    i++;
       }
       int s=1;
       while(true){
        if(s>j){
            break;
        }
        else{
         for(int i=1;i<=j;i++){
            if(sp2[s][0]==sp2[i][0]&&sp2[s][1]==sp2[i][1]&&s!=i){
                sp2[s][2]+=sp2[i][2];
                
                int p=i;
                for(int k=p;k<j;k++){
                    sp2[k][0]=sp2[k+1][0];
                    sp2[k][1]=sp2[k+1][1];
                    sp2[k][2]=sp2[k+1][2];
                }
                j--;
            }
         }
         s++;}
         
        
       }
        sp2[0][0]=4;
       sp2[0][1]=4;
       sp2[0][2]=j-1;
       for(int i=0;i<j;i++){
        for(int o=1;o<=j-1;o++){
        if  (sp2[o][0] > sp2[o+1][0] || (sp2[o][0] == sp2[o+1][0] && sp2[o][1] > sp2[o+1][1]))
{
           {
            int temp1=sp2[o][0];
            int temp2=sp2[o][1];
            int temp3=sp2[o][2];
            sp2[o][0]=sp2[o+1][0];
            sp2[o][1]=sp2[o+1][1];
            sp2[o][2]=sp2[o+1][2];
            sp2[o+1][0]=temp1;
            sp2[o+1][1]=temp2;
            sp2[o+1][2]=temp3;
            
        }}
       }}

       cout<<endl<<"result matrix"<<endl;
       for(int i=0;i<=j-1;i++){
        cout<<sp2[i][0]<<" "<<sp2[i][1]<<" " <<sp2[i][2]<<endl;
       }






       
    }
